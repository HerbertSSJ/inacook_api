{% extends "base.html" %}
{% load static %}

{% block title %}Mis Recetas - Inacook{% endblock %}

{% block content %}
<div class="container recetas-container">

    <h1>Mis Recetas</h1>

    {% if recetas_data %}
    <table class="tabla-recetas">
        <thead>
            <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Categoría</th>
                <th>Aporte (kcal)</th>
                <th>Tiempo</th>
                <th>Precio</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <tbody>
            {% for data in recetas_data %}
            {% with receta=data.receta precio=data.precio %}
            <tr>

                <td style="text-align:center;">
                    {% if receta.imagen %}
                    <img src="{{ receta.imagen.url }}" class="tabla-img">
                    {% else %}
                    <span class="no-image">Sin imagen</span>
                    {% endif %}
                </td>

                <td>{{ receta.Nombre_Receta }}</td>
                <td>{{ receta.Categoria }}</td>
                <td>{{ receta.Aporte_Calorico }}</td>
                <td>{{ receta.Tiempo_Preparacion }}</td>

                <td>
                    {% if precio != "No calculado" %}
                    ${{ precio }}
                    {% else %}
                    No calculado
                    {% endif %}
                </td>

                <td class="acciones-td">
                    <a href="{% url 'editar_receta' receta.id %}" class="btn btn-secondary">Editar</a>
                    <a href="{% url 'borrar_receta' receta.id %}" class="btn btn-danger">Borrar</a>
                    <a href="{% url 'comprobante_receta' receta.id %}" class="btn btn-primary">Comprobante</a>
                </td>

            </tr>
            {% endwith %}
            {% endfor %}
        </tbody>
    </table>

    {% else %}
    <p class="mensaje-vacio">Aún no has subido recetas.</p>
    {% endif %}

</div>
{% endblock %}