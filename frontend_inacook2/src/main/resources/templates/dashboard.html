<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Inacook</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>.menu-list{list-style:none;padding:0}</style>
    
</head>
<body>
    <nav class="navbar"><a href="/dashboard" class="nav-logo">Inacook</a></nav>
    <div class="container">
        <h1>Bienvenido, <span id="user-name">Usuario</span> ğŸ³</h1>
        <p><strong>Rol:</strong> <span id="user-role">-</span></p>

        <div class="menu">
            <h2>Acciones rÃ¡pidas</h2>
            <ul class="menu-list">
                <li><a href="/subir_receta" class="btn">ğŸ” Subir nueva receta</a></li>
                <li><a href="/ver_recetas" class="btn">ğŸ“‚ Ver mis recetas</a></li>
                <li><a href="/calculadora" class="btn">ğŸ§® Calculadora</a></li>
                <li><a href="/ver_historial" class="btn">ğŸ“œ Historial</a></li>
            </ul>
        </div>
    </div>

    <script src="/js/config.js"></script>
    <script src="/js/auth.js"></script>
    <script>
    // If logged in, try to fetch profile
    document.addEventListener('DOMContentLoaded', async ()=>{
        if(isLoggedIn()){
            try{
                const resp = await fetch(`${API_BASE_URL}/me/`, { headers: { ...authHeader() } });
                if(resp.ok){ const data = await resp.json(); document.getElementById('user-name').textContent = data.username || data.nombre || 'Usuario'; document.getElementById('user-role').textContent = data.rol || '-'; }
            }catch(e){}
        }
    });
    </script>
</body>
</html>
